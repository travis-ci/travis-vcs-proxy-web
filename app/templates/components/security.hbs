<div class="settings-page-container">
  <h2 class='text-black ta-c fs-36 mt-24'>Two-Factor Authentication</h2>
  <p>Please set up two-factor authentication to your Travis CI Proxy account.
    You'll need a verification code each time you sign in to your Account.
  </p>
  <div class="enable-2fa">
    Enable
    <label class="switch">
      <input
        type="checkbox"
        disabled={{this.is2FAEnabled}}
        checked={{this.is2FAEnabled}}
        onclick={{action (mut this.is2FAEnabled) value="target.checked"}}
      >
      <span class="slider round"></span>
    </label>
  </div>
  {{#if this.is2FAEnabled}}
  {{#if this.user.otpRequiredForLogin}}
  <div>
    <button
      type='button'
      class='button button--green mt-29 ml-160'
      {{ on 'click' this.showRecoveryModal }}
    >
      Generate new recovery codes
    </button>
  </div>
  {{else}}
  <div class="fs-16">
    <p><strong class="fs-18 fw-600">STEP 1.</strong>
       Download and install the
       <ExternalLinkTo
          href='#'
          title="Help"
          class="help-link"
        >
          Google Authenticator
        </ExternalLinkTo>
       for your phone or tablet.</p>
    <p><strong class="fs-18 fw-600">STEP 2.</strong>
       Open the authentication app. Scan the QR code below.</p>
    <div>
      <QrCode @text={{this.qrCodeUrl}} @size={{200}} @class="qr-code" />
    </div>

    <p><strong class="fs-18 fw-600">STEP 3.</strong>
       Once the barcode above is scanned, enter the 6-digit verification code generated by the app.</p>

    <div class="verification">
      <div>
        <h4 class="fs-14 fw-600 mb-6 mt-0">VERIFICATION CODE</h4>
        <div class='entry-field w-156'>
          <Input
            id='verification_code'
            @type='text'
            placeholder='6 digit code'
            @value={{this.otpAttempt}}
            class='text-field'
          />
        </div>
      </div>
      <div>
        <button
          type='button'
          class='button button--green w-156 mt-29 ml-20'
          {{ on 'click' this.enable2FA }}
        >
          Verify
        </button>
      </div>
    </div>
  </div>
  {{/if}}
  {{/if}}
</div>
<Dialogs::RecoveryCodesModal
@isOpen={{this.showRecoveryCodes}}
@onClose={{action this.closeRecoveryModal}}
@codes={{this.codes}}
@joinedCodes={{this.joinedCodes}}
/>
